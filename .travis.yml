language: python
cache:
- pip
python:
- 3.4
- 3.5
- 3.6
services: postgresql
before_install:
- virtualenv venv
install:
- pip install --upgrade pip
- if [[ $TRAVIS_PYTHON_VERSION == 3.4 ]]; then pip install "lib_bin/linux/pycrypto-2.6.1-cp34-cp34m-linux_x86_64.whl"; fi
- if [[ $TRAVIS_PYTHON_VERSION == 3.5 ]]; then pip install "lib_bin/linux/pycrypto-2.6.1-cp35-cp35m-linux_x86_64.whl"; fi
- if [[ $TRAVIS_PYTHON_VERSION == 3.6 ]]; then pip install "lib_bin/linux/pycrypto-2.6.1-cp36-cp36m-linux_x86_64.whl"; fi
- python "lib_bin\repositories\django-q-master\setup.py" install
- pip install django-encrypted-model-fields
- pip install -r requirements.txt
before_script:
- psql -c "CREATE DATABASE travisci;" -U postgres
script:
- python manage.py collectstatic --noinput
- python manage.py makemigrations landing_page api_v1_0
- python manage.py migrate
- coverage run manage.py test
deploy:
  provider: cloudfoundry
  api: https://api.eu-gb.bluemix.net
  username: jonathan.dekhtiar@utc.fr
  password:
    secure: "x8cb0R2mrSXqt0/Q7Q08FxAVPQWXah6W76NnXKj+OUu2Fmb8ONSjDgdvWJCB+FksB5aBw+nytPg8RQJ4/eY2WQ0ii78qJZBoQYDnWLrj6KP5H8+uAHY/jAvZV6xoWY/cfKn89bcwufPxw6v87rmFzIkH5lkW+amvRxbRTWymGXz0yV4Jw5bpD23xp8ayJ48GI8iw+Eu5DR08y81zVrltzcO/0IQupL6xmSAZRvhzFJWYybCz3EZEuFhkPZ7bDOPS286+ddxa2u8VjlmMrJ1XiC9mZV5lR1NqXcQvj5uWrnKcutLxgga/9qFfaNd3+170tOBmi/KGD4F+43LxATQJANP5Ugb+2StKuFZD6eE4tmAAJNvozPsVDpKwua8q1ezpYdXiYYS7Um3KtGLJRG8/x5DjQHVg3L56k/pzOwXZsSM86r1X1+fkiAeGeyF0quHUxy11EsDVZ1eCxQ3CrGzl6fh1PA9Gklzu0fjrayObXSMPszpIwZj+Yq/fSMAnADnhzQy8zsnZ1fGY20PafUJqOQx7zC+De66DMSZZzHC3kjbL+galq4c4ZwGYdpWSRdUPcLQF1BETh6Fniwyl3Ak5SEQUmZmMRLcyqG3eXioEqy2WUa1lQr/KHefKHmxLOYhsWMUVUggAOi6WgIKn94PIgf99phjMmEHCppBsPN4+QiY="
  organization: FeedCrunch
  space: prod
  manifest: manifest.yml       # (optional)  Defaults to manifest.yml.
  region: eu-gb                # (optional)  [ng, eu-gb , au-syd] Defaults to US South region (ng).
  on:
    branch: master
    python: '3.6'
    repo: DEKHTIARJonathan/test-bluemix